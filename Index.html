<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trading Chart</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    :root {
      --ios-bg: linear-gradient(135deg, #0d1b2a 0%, #1b263b 100%);
      --ios-card: rgba(255, 255, 255, 0.08);
      --ios-card-border: rgba(255, 255, 255, 0.12);
      --ios-primary: #007AFF;
      --ios-secondary: #5856D6;
      --ios-success: #34C759;
      --ios-danger: #FF3B30;
      --ios-text: #FFFFFF;
      --ios-text-secondary: rgba(255, 255, 255, 0.7);
      --ios-blur: blur(20px);
      --ios-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
    }

    :root[data-theme="light"] {
      --ios-bg: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      --ios-card: rgba(255, 255, 255, 0.9);
      --ios-card-border: rgba(0, 0, 0, 0.1);
      --ios-primary: #007AFF;
      --ios-secondary: #5856D6;
      --ios-success: #34C759;
      --ios-danger: #FF3B30;
      --ios-text: #1d1d1f;
      --ios-text-secondary: rgba(0, 0, 0, 0.6);
      --ios-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    }
    
    body {
      margin: 0;
      background: var(--ios-bg);
      color: var(--ios-text);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, sans-serif;
      overflow-x: hidden;
      min-height: 100vh;
      padding: 10px;
      transition: all 0.3s ease;
    }
    
    .container {
      display: flex;
      min-height: calc(100vh - 20px);
      gap: 15px;
    }
    
    .chart-section {
      flex: 3;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    
    .ai-section {
      flex: 1;
      min-width: 280px;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    
    /* Theme Toggle */
    .theme-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
    }
    
    .theme-toggle-btn {
      width: 50px;
      height: 50px;
      background: var(--ios-card);
      backdrop-filter: var(--ios-blur);
      border: 1px solid var(--ios-card-border);
      border-radius: 25px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: var(--ios-shadow);
    }
    
    .theme-toggle-btn:hover {
      background: var(--ios-primary);
      transform: scale(1.1);
    }
    
    .theme-toggle-btn svg {
      width: 24px;
      height: 24px;
      fill: var(--ios-text);
      transition: all 0.3s ease;
    }
    
    .theme-toggle-btn:hover svg {
      fill: white;
    }
    
    /* iOS Cards */
    .ios-card {
      background: var(--ios-card);
      backdrop-filter: var(--ios-blur);
      border: 1px solid var(--ios-card-border);
      border-radius: 16px;
      box-shadow: var(--ios-shadow);
      overflow: hidden;
      transition: all 0.3s ease;
    }
    
    /* Combined Controls Section */
    .combined-controls {
      padding: 20px;
      flex-shrink: 0;
    }
    
    .demo-title {
      font-size: 18px;
      margin-bottom: 15px;
      color: var(--ios-text);
      text-align: center;
      font-weight: 600;
    }
    
    .demo-controls {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    
    .demo-input {
      flex: 1;
      min-width: 100px;
      padding: 12px 14px;
      border-radius: 12px;
      border: 1px solid var(--ios-card-border);
      background: rgba(255, 255, 255, 0.05);
      color: var(--ios-text);
      font-size: 14px;
      transition: all 0.3s ease;
    }
    
    .demo-input:focus {
      outline: none;
      border-color: var(--ios-primary);
      background: rgba(255, 255, 255, 0.08);
    }
    
    .buy-btn {
      background: var(--ios-success);
      padding: 12px 18px;
      font-size: 14px;
    }
    
    .buy-btn:hover {
      background: #30a14e;
      box-shadow: 0 6px 20px rgba(52, 199, 89, 0.3);
    }
    
    .sell-btn {
      background: var(--ios-danger);
      padding: 12px 18px;
      font-size: 14px;
    }
    
    .sell-btn:hover {
      background: #d70015;
      box-shadow: 0 6px 20px rgba(255, 59, 48, 0.3);
    }
    
    .ios-button {
      padding: 12px 18px;
      border-radius: 12px;
      border: none;
      color: white;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .ios-button:hover {
      transform: translateY(-1px);
    }
    
    /* Transaction History */
    .history-title {
      font-size: 18px;
      margin-bottom: 15px;
      color: var(--ios-text);
      text-align: center;
      font-weight: 600;
    }
    
    .history-list {
      max-height: 150px;
      overflow-y: auto;
    }
    
    .transaction-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      margin-bottom: 6px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid var(--ios-card-border);
      border-radius: 10px;
      transition: all 0.3s ease;
      font-size: 13px;
    }
    
    .transaction-item:hover {
      background: rgba(255, 255, 255, 0.08);
      transform: translateY(-1px);
    }
    
    .transaction-details {
      flex: 1;
    }
    
    .transaction-symbol {
      font-weight: 600;
      color: var(--ios-text);
      margin-bottom: 2px;
      font-size: 13px;
    }
    
    .transaction-type {
      font-size: 11px;
      color: var(--ios-text-secondary);
    }
    
    .transaction-amount {
      text-align: right;
    }
    
    .transaction-quantity {
      font-weight: 600;
      color: var(--ios-text);
      margin-bottom: 2px;
      font-size: 13px;
    }
    
    .transaction-price {
      font-size: 11px;
      color: var(--ios-text-secondary);
    }
    
    .transaction-buy {
      border-left: 4px solid var(--ios-success);
    }
    
    .transaction-sell {
      border-left: 4px solid var(--ios-danger);
    }
    
    /* Extended Graph Container */
    .tradingview-widget-container {
      flex: 1;
      border-radius: 0;
      overflow: hidden;
      min-height: 550px;
    }
    
    /* AI Chat Styles */
    .ai-title {
      font-size: 20px;
      margin-bottom: 15px;
      text-align: center;
      color: var(--ios-text);
      font-weight: 600;
    }
    
    .chat-container {
      flex: 1;
      display: flex;
      flex-direction: column;
      border-radius: 16px;
      overflow: hidden;
      position: relative;
    }
    
    .chat-messages {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      max-height: 250px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    
    .message {
      padding: 12px 16px;
      border-radius: 16px;
      max-width: 85%;
      line-height: 1.4;
      position: relative;
      animation: messageAppear 0.3s ease-out;
      font-size: 14px;
    }
    
    @keyframes messageAppear {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .user-message {
      background: var(--ios-primary);
      margin-left: auto;
      border-bottom-right-radius: 6px;
    }
    
    .ai-message {
      background: rgba(255, 255, 255, 0.1);
      border-bottom-left-radius: 6px;
    }
    
    .chat-input-container {
      position: fixed;
      bottom: 15px;
      right: 15px;
      width: calc(25% - 30px);
      min-width: 250px;
      display: flex;
      padding: 12px;
      background: var(--ios-card);
      backdrop-filter: var(--ios-blur);
      border: 1px solid var(--ios-card-border);
      border-radius: 16px;
      box-shadow: var(--ios-shadow);
      z-index: 100;
    }
    
    .chat-input {
      flex: 1;
      padding: 12px 14px;
      border-radius: 12px;
      border: 1px solid var(--ios-card-border);
      background: rgba(255, 255, 255, 0.05);
      color: var(--ios-text);
      font-size: 14px;
      transition: all 0.3s ease;
    }
    
    .chat-input:focus {
      outline: none;
      border-color: var(--ios-primary);
      background: rgba(255, 255, 255, 0.08);
    }
    
    .chat-send {
      margin-left: 10px;
      padding: 12px 16px;
      border-radius: 12px;
      border: none;
      background: var(--ios-primary);
      color: white;
      cursor: pointer;
      font-weight: 600;
      font-size: 14px;
      transition: all 0.3s ease;
    }
    
    .chat-send:hover {
      background: #0066cc;
      transform: translateY(-1px);
    }
    
    /* Responsive Design */
    @media (max-width: 768px) {
      .container {
        flex-direction: column;
        gap: 10px;
      }
      
      .ai-section {
        min-width: auto;
      }
      
      .demo-controls {
        flex-direction: column;
      }
      
      .chat-input-container {
        width: calc(100% - 30px);
        right: 15px;
        left: 15px;
        min-width: auto;
      }
      
      .theme-toggle {
        top: 15px;
        right: 15px;
      }
      
      .theme-toggle-btn {
        width: 44px;
        height: 44px;
      }
      
      .tradingview-widget-container {
        min-height: 400px;
      }
    }
    
    /* Custom Scrollbar */
    ::-webkit-scrollbar {
      width: 4px;
    }
    
    ::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 2px;
    }
    
    ::-webkit-scrollbar-thumb {
      background: var(--ios-primary);
      border-radius: 2px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: #0066cc;
    }
  </style>
</head>
<body>
  <!-- Theme Toggle -->
  <div class="theme-toggle">
    <div class="theme-toggle-btn" id="themeToggle">
      <svg id="themeIcon" viewBox="0 0 24 24">
        <path d="M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5S14.76,7,12,7L12,7z M2,13h2c0.55,0,1-0.45,1-1s-0.45-1-1-1H2c-0.55,0-1,0.45-1,1 S1.45,13,2,13z M20,13h2c0.55,0,1-0.45,1-1s-0.45-1-1-1h-2c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2 c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M6.34,7.16 l-1.42-1.42c-0.39-0.39-1.02-0.39-1.41,0c-0.39,0.39-0.39,1.02,0,1.41l1.42,1.42c0.39,0.39,1.02,0.39,1.41,0 C6.73,8.18,6.73,7.55,6.34,7.16z M19.08,18.92c-0.39,0.39-1.02,0.39-1.41,0l-1.42-1.42c-0.39-0.39-0.39-1.02,0-1.41 c0.39-0.39,1.02-0.39,1.41,0l1.42,1.42C19.47,17.9,19.47,18.53,19.08,18.92z M7.16,17.66c0.39,0.39,1.02,0.39,1.41,0 c0.39-0.39,0.39-1.02,0-1.41l-1.42-1.42c-0.39-0.39-1.02-0.39-1.41,0c-0.39,0.39-0.39,1.02,0,1.41L7.16,17.66z M18.92,5.08 c0.39,0.39,0.39,1.02,0,1.41l-1.42,1.42c-0.39,0.39-1.02,0.39-1.41,0c-0.39-0.39-0.39-1.02,0-1.41l1.42-1.42 C17.9,4.69,18.53,4.69,18.92,5.08z"/>
      </svg>
    </div>
  </div>

  <div class="container">
    <div class="chart-section">
      <!-- TradingView Widget with Built-in Search -->
      <div class="ios-card tradingview-widget-container">
        <div id="tradingview_chart"></div>
      </div>
      
      <!-- Combined Controls & History -->
      <div class="ios-card combined-controls">
        <div class="demo-title">Trading Controls</div>
        
        <div class="demo-controls">
          <input type="number" id="quantityInput" class="demo-input" placeholder="Quantity" value="1" min="1">
          <input type="number" id="priceInput" class="demo-input" placeholder="Price" step="0.01">
          <button class="ios-button buy-btn" id="buyButton">Buy</button>
          <button class="ios-button sell-btn" id="sellButton">Sell</button>
        </div>
        
        <div class="history-title">Transaction History</div>
        <div class="history-list" id="transactionList">
          <!-- Transactions will be added here dynamically -->
        </div>
      </div>
    </div>
    
    <!-- AI Assistant Section -->
    <div class="ai-section">
      <div class="ios-card" style="padding: 20px;">
        <div class="ai-title">Trading Assistant</div>
        
        <div class="chat-container">
          <div class="chat-messages" id="chatMessages">
            <div class="message ai-message">
              Welcome! I'm here to help with your trading analysis. Ask me anything about the markets.
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Fixed Chat Input -->
  <div class="chat-input-container">
    <input type="text" class="chat-input" id="chatInput" placeholder="Message Trading Assistant...">
    <button class="chat-send" id="chatSend">Send</button>
  </div>

  <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
  <script type="text/javascript">
    // Default symbol
    let currentSymbol = "BITSTAMP:BTCUSD";
    let transactionHistory = [];
    let currentTheme = 'dark';

    // Local Storage Keys
    const STORAGE_KEYS = {
      TRANSACTIONS: 'trading_transactions',
      THEME: 'trading_theme'
    };

    // Local Storage Functions
    function saveToLocalStorage(key, data) {
      try {
        localStorage.setItem(key, JSON.stringify(data));
      } catch (error) {
        console.error('Error saving to localStorage:', error);
      }
    }

    function loadFromLocalStorage(key) {
      try {
        const data = localStorage.getItem(key);
        return data ? JSON.parse(data) : null;
      } catch (error) {
        console.error('Error loading from localStorage:', error);
        return null;
      }
    }

    // Load saved data on page load
    function loadSavedData() {
      // Load theme
      const savedTheme = loadFromLocalStorage(STORAGE_KEYS.THEME);
      if (savedTheme) {
        currentTheme = savedTheme;
        document.documentElement.setAttribute('data-theme', currentTheme);
        updateThemeIcon();
      }

      // Load transactions
      const savedTransactions = loadFromLocalStorage(STORAGE_KEYS.TRANSACTIONS);
      if (savedTransactions && Array.isArray(savedTransactions)) {
        transactionHistory = savedTransactions;
        updateTransactionHistory();
      }
    }

    // Theme management
    function toggleTheme() {
      currentTheme = currentTheme === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', currentTheme);
      saveToLocalStorage(STORAGE_KEYS.THEME, currentTheme);
      
      // Update TradingView theme
      if (window.tvWidget) {
        window.tvWidget.remove();
      }
      initTradingView(currentSymbol);
      
      updateThemeIcon();
    }

    function updateThemeIcon() {
      const themeIcon = document.getElementById('themeIcon');
      if (currentTheme === 'light') {
        themeIcon.innerHTML = '<path d="M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36c-0.98,1.37-2.58,2.26-4.4,2.26 c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/>';
      } else {
        themeIcon.innerHTML = '<path d="M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5S14.76,7,12,7L12,7z M2,13h2c0.55,0,1-0.45,1-1s-0.45-1-1-1H2c-0.55,0-1,0.45-1,1 S1.45,13,2,13z M20,13h2c0.55,0,1-0.45,1-1s-0.45-1-1-1h-2c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2 c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M6.34,7.16 l-1.42-1.42c-0.39-0.39-1.02-0.39-1.41,0c-0.39,0.39-0.39,1.02,0,1.41l1.42,1.42c0.39,0.39,1.02,0.39,1.41,0 C6.73,8.18,6.73,7.55,6.34,7.16z M19.08,18.92c-0.39,0.39-1.02,0.39-1.41,0l-1.42-1.42c-0.39-0.39-0.39-1.02,0-1.41 c0.39-0.39,1.02-0.39,1.41,0l1.42,1.42C19.47,17.9,19.47,18.53,19.08,18.92z M7.16,17.66c0.39,0.39,1.02,0.39,1.41,0 c0.39-0.39,0.39-1.02,0-1.41l-1.42-1.42c-0.39-0.39-1.02-0.39-1.41,0c-0.39,0.39-0.39,1.02,0,1.41L7.16,17.66z M18.92,5.08 c0.39,0.39,0.39,1.02,0,1.41l-1.42,1.42c-0.39,0.39-1.02,0.39-1.41,0c-0.39-0.39-0.39-1.02,0-1.41l1.42-1.42 C17.9,4.69,18.53,4.69,18.92,5.08z"/>';
      }
    }

    // Initialize the TradingView widget with built-in search
    function initTradingView(symbol) {
      // Remove existing widget if present
      const container = document.getElementById('tradingview_chart');
      container.innerHTML = '';
      
      // Create new widget with TradingView's default search enabled
      window.tvWidget = new TradingView.widget({
        "width": "100%",
        "height": "100%",
        "symbol": symbol,
        "interval": "1",
        "timezone": "Etc/UTC",
        "theme": currentTheme,
        "style": "1",
        "locale": "en",
        "toolbar_bg": currentTheme === 'dark' ? "#1b263b" : "#f5f7fa",
        "enable_publishing": false,
        "allow_symbol_change": true,
        "hide_legend": false,
        "save_image": false,
        "studies": ["RSI@tv-basicstudies", "Volume@tv-basicstudies"],
        "container_id": "tradingview_chart",
        "show_popup_button": true,
        "popup_width": "1000",
        "popup_height": "650",
        "watchlist": [
          "BITSTAMP:BTCUSD",
          "BINANCE:ETHUSDT", 
          "NASDAQ:AAPL",
          "NASDAQ:TSLA",
          "TVC:GOLD",
          "FX:EURUSD"
        ],
        "details": true,
        "hotlist": true,
        "calendar": true,
        "overrides": {
          "paneProperties.background": currentTheme === 'dark' ? "#0d1b2a" : "#ffffff",
          "paneProperties.vertGridProperties.color": currentTheme === 'dark' ? "rgba(255,255,255,0.05)" : "rgba(0,0,0,0.05)",
          "paneProperties.horzGridProperties.color": currentTheme === 'dark' ? "rgba(255,255,255,0.05)" : "rgba(0,0,0,0.05)",
          "mainSeriesProperties.candleStyle.upColor": "#34C759",
          "mainSeriesProperties.candleStyle.downColor": "#FF3B30",
          "mainSeriesProperties.candleStyle.borderUpColor": "#34C759",
          "mainSeriesProperties.candleStyle.borderDownColor": "#FF3B30",
          "mainSeriesProperties.candleStyle.wickUpColor": "#34C759",
          "mainSeriesProperties.candleStyle.wickDownColor": "#FF3B30"
        },
        "studies_overrides": {
          "volume.volume.color.0": "#FF3B30",
          "volume.volume.color.1": "#34C759",
          "volume.volume.transparency": 70,
          "volume.volume ma.color": "#007AFF",
          "rsi.display": "line",
          "rsi.linecolor": "#5856D6"
        }
      });
    }
    
    // Add transaction to history
    function addTransaction(type, quantity, price) {
      const transaction = {
        id: Date.now(),
        type: type,
        symbol: currentSymbol.split(':').pop(),
        quantity: quantity,
        price: price,
        timestamp: new Date().toLocaleTimeString(),
        date: new Date().toLocaleDateString()
      };
      
      transactionHistory.unshift(transaction);
      saveToLocalStorage(STORAGE_KEYS.TRANSACTIONS, transactionHistory);
      updateTransactionHistory();
    }
    
    // Update transaction history display
    function updateTransactionHistory() {
      const transactionList = document.getElementById('transactionList');
      transactionList.innerHTML = '';
      
      if (transactionHistory.length === 0) {
        transactionList.innerHTML = '<div style="text-align: center; color: var(--ios-text-secondary); padding: 20px; font-size: 14px;">No transactions yet</div>';
        return;
      }
      
      transactionHistory.forEach(transaction => {
        const transactionItem = document.createElement('div');
        transactionItem.className = `transaction-item ${transaction.type === 'buy' ? 'transaction-buy' : 'transaction-sell'}`;
        
        transactionItem.innerHTML = `
          <div class="transaction-details">
            <div class="transaction-symbol">${transaction.symbol}</div>
            <div class="transaction-type">${transaction.type.toUpperCase()} â€¢ ${transaction.timestamp}</div>
          </div>
          <div class="transaction-amount">
            <div class="transaction-quantity">${transaction.quantity} shares</div>
            <div class="transaction-price">$${transaction.price.toFixed(2)}</div>
          </div>
        `;
        
        transactionList.appendChild(transactionItem);
      });
    }
    
    // Trading Demo Functions
    function buyAsset() {
      const quantity = parseFloat(document.getElementById('quantityInput').value);
      const priceInput = document.getElementById('priceInput').value;
      
      if (isNaN(quantity) || quantity <= 0) {
        alert('Please enter a valid quantity');
        return;
      }
      
      const symbolName = currentSymbol.split(':').pop();
      const price = priceInput ? parseFloat(priceInput) : Math.random() * 1000 + 100;
      
      addTransaction('buy', quantity, price);
      alert(`âœ… Buy Order: ${quantity} ${symbolName} at $${price.toFixed(2)}`);
    }
    
    function sellAsset() {
      const quantity = parseFloat(document.getElementById('quantityInput').value);
      const priceInput = document.getElementById('priceInput').value;
      const symbolName = currentSymbol.split(':').pop();
      
      if (isNaN(quantity) || quantity <= 0) {
        alert('Please enter a valid quantity');
        return;
      }
      
      const price = priceInput ? parseFloat(priceInput) : Math.random() * 1000 + 100;
      
      addTransaction('sell', quantity, price);
      alert(`ðŸ”» Sell Order: ${quantity} ${symbolName} at $${price.toFixed(2)}`);
    }
    
    // AI Chat functionality
    function askAI(question) {
      const chatMessages = document.getElementById('chatMessages');
      const chatInput = document.getElementById('chatInput');
      
      // Add user message
      const userMessage = document.createElement('div');
      userMessage.className = 'message user-message';
      userMessage.textContent = question;
      chatMessages.appendChild(userMessage);
      
      // Clear input
      chatInput.value = '';
      
      // Scroll to bottom
      chatMessages.scrollTop = chatMessages.scrollHeight;
      
      // Simulate AI thinking
      setTimeout(() => {
        const aiMessage = document.createElement('div');
        aiMessage.className = 'message ai-message';
        aiMessage.textContent = 'AI assistant is ready for integration. Connect to your preferred AI service for real responses.';
        chatMessages.appendChild(aiMessage);
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }, 800);
    }
    
    // Initialize with default symbol
    document.addEventListener('DOMContentLoaded', function() {
      // Load saved data first
      loadSavedData();
      
      // Initialize TradingView
      initTradingView(currentSymbol);
      
      // Set up theme toggle
      document.getElementById('themeToggle').addEventListener('click', toggleTheme);
      
      // Set up trading demo buttons
      document.getElementById('buyButton').addEventListener('click', buyAsset);
      document.getElementById('sellButton').addEventListener('click', sellAsset);
      
      // Set up chat functionality
      document.getElementById('chatSend').addEventListener('click', function() {
        const chatInput = document.getElementById('chatInput');
        if (chatInput.value.trim() !== '') {
          askAI(chatInput.value);
        }
      });
      
      document.getElementById('chatInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          if (this.value.trim() !== '') {
            askAI(this.value);
          }
        }
      });
    });
  </script>
</body>
</html>